{% extends 'bodega/base.html' %}
{% block title %}Gestión de Usuarios{% endblock %}
{% block content %}
    <h1><i class="bi bi-people-fill me-2"></i>Gestión de Usuarios</h1>
    {% if perms.auth.add_user %}
    <div class="mb-3"><a href="{% url 'crear_usuario' %}" class="btn btn-primary">Crear Nuevo Usuario</a></div>
    {% endif %}
    <table class="table table-striped table-hover table-sm">
        <thead class="table-light"><tr><th>Usuario</th><th>Email</th><th>Grupos</th><th>Activo</th><th>Acciones</th></tr></thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.email|default:"--" }}</td>
                <td>{% for group in user.groups.all %}{{ group.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
                <td>{% if user.is_active %}<i class="bi bi-check-circle-fill text-success"></i> Sí{% else %}<i class="bi bi-x-circle-fill text-danger"></i> No{% endif %}</td>
                <td>
                    {% if perms.auth.change_user %}
                    <a href="{% url 'editar_usuario' pk=user.id %}" class="btn btn-sm btn-warning">Editar</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}